/*!
 * Cropper v0.10.1
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2015 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2015-08-06T20:13:08.748Z
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"number"==typeof a&&!isNaN(a)}function c(a){return"undefined"==typeof a}function d(a,c){var d=[];return b(c)&&d.push(c),d.slice.apply(a,d)}function e(a,b){var c=d(arguments,2);return function(){return a.apply(b,c.concat(d(arguments)))}}function f(a){var b=a.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return b&&(b[1]!==n.protocol||b[2]!==n.hostname||b[3]!==n.port)}function g(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function h(a){return a?"rotate("+a+"deg)":"none"}function i(a,b){var c,d,e=Q(a.degree)%180,f=(e>90?180-e:e)*Math.PI/180,g=R(f),h=S(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function j(b,c){var d=a("<canvas>")[0],e=d.getContext("2d"),f=c.naturalWidth,g=c.naturalHeight,h=c.rotate,j=i({width:f,height:g,degree:h});return h?(d.width=j.width,d.height=j.height,e.save(),e.translate(j.width/2,j.height/2),e.rotate(h*Math.PI/180),e.drawImage(b,-f/2,-g/2,f,g),e.restore()):(d.width=f,d.height=g,e.drawImage(b,0,0,f,g)),d}function k(b,c){this.$element=a(b),this.options=a.extend({},k.DEFAULTS,a.isPlainObject(c)&&c),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.replaced=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var l=a(window),m=a(document),n=window.location,o="cropper",p="preview."+o,q=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,r="cropper-modal",s="cropper-hide",t="cropper-hidden",u="cropper-invisible",v="cropper-move",w="cropper-crop",x="cropper-disabled",y="cropper-bg",z="mousedown touchstart pointerdown MSPointerDown",A="mousemove touchmove pointermove MSPointerMove",B="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",C="wheel mousewheel DOMMouseScroll",D="dblclick",E="resize."+o,F="build."+o,G="built."+o,H="cropstart."+o,I="cropmove."+o,J="cropend."+o,K="change."+o,L="zoom."+o,M=a.isFunction(a("<canvas>")[0].getContext),N=Math.sqrt,O=Math.min,P=Math.max,Q=Math.abs,R=Math.sin,S=Math.cos,T=parseFloat,U={};U.init=function(){var a,b=this.$element;if(b.is("img")){if(this.isImg=!0,this.originalUrl=a=b.attr("src"),!a)return;a=b.prop("src")}else b.is("canvas")&&M&&(a=b[0].toDataURL());this.load(a)},U.load=function(b){var c,d,e,h=this.options,i=this.$element;b&&(i.one(F,h.build),this.trigger(F)||(h.checkImageOrigin&&f(b)&&(c=' crossOrigin="anonymous"',i.prop("crossOrigin")||(d=g(b))),this.$clone=e=a("<img"+(c||"")+' src="'+(d||b)+'">'),e.one("load",a.proxy(function(){var a=e[0],c=a.naturalWidth||a.width,d=a.naturalHeight||a.height;this.image={naturalWidth:c,naturalHeight:d,aspectRatio:c/d,rotate:0},this.url=b,this.ready=!0,this.build()},this)).one("error",function(){e.remove()}),e.addClass(s).insertAfter(i)))},U.build=function(){var b,c,d,e=this.$element,f=this.$clone,g=this.options;this.ready&&(this.built&&this.unbuild(),this.$cropper=b=a(k.TEMPLATE),e.addClass(t),f.removeClass(s),this.$container=e.parent().append(b),this.$canvas=b.find(".cropper-canvas").append(f),this.$dragBox=b.find(".cropper-drag-box"),this.$cropBox=c=b.find(".cropper-crop-box"),this.$viewBox=b.find(".cropper-view-box"),this.$face=d=c.find(".cropper-face"),this.addListeners(),this.initPreview(),g.aspectRatio=T(g.aspectRatio)||NaN,g.autoCrop?(this.cropped=!0,g.modal&&this.$dragBox.addClass(r)):c.addClass(t),g.guides||c.find(".cropper-dashed").addClass(t),g.center||c.find(".cropper-center").addClass(t),g.cropBoxMovable&&d.addClass(v).data("type","all"),g.highlight||d.addClass(u),g.background&&b.addClass(y),g.cropBoxResizable||c.find(".cropper-line, .cropper-point").addClass(t),this.setDragMode(g.dragCrop?"crop":g.movable?"move":"none"),this.built=!0,this.render(),this.setData(g.data),e.one(G,g.built),this.trigger(G))},U.unbuild=function(){this.built&&(this.built=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.removeListeners(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},a.extend(U,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.$element,b=this.$container,c=this.$cropper,d=this.options;if(c.addClass(t),a.removeClass(t),d.maxContainerWidth&&b.width("auto"),d.maxContainerHeight){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);b.height(d.maxContainerHeight*e)}c.css(this.container={width:P(b.width(),T(d.minContainerWidth)||200),height:P(b.height(),T(d.minContainerHeight)||100)}),a.addClass(t),c.removeClass(t)},initCanvas:function(){var b=this.container,c=b.width,d=b.height,e=this.image,f=e.aspectRatio,g={aspectRatio:f,width:c,height:d};d*f>c?g.height=c/f:g.width=d*f,g.oldLeft=g.left=(c-g.width)/2,g.oldTop=g.top=(d-g.height)/2,this.canvas=g,this.limitCanvas(!0,!0),this.initialImage=a.extend({},e),this.initialCanvas=a.extend({},g)},limitCanvas:function(b,c){var d,e,f=this.options,g=f.strict,h=this.container,i=h.width,j=h.height,k=this.canvas,l=k.aspectRatio,m=this.cropBox,n=this.cropped&&m,o=this.initialCanvas||k,p=o.width,q=o.height;b&&(d=T(f.minCanvasWidth)||0,e=T(f.minCanvasHeight)||0,d?(g&&(d=P(n?m.width:p,d)),e=d/l):e?(g&&(e=P(n?m.height:q,e)),d=e*l):g&&(n?(d=m.width,e=m.height,e*l>d?d=e*l:e=d/l):(d=p,e=q)),a.extend(k,{minWidth:d,minHeight:e,maxWidth:1/0,maxHeight:1/0})),c&&(g?n?(k.minLeft=O(m.left,m.left+m.width-k.width),k.minTop=O(m.top,m.top+m.height-k.height),k.maxLeft=m.left,k.maxTop=m.top):(k.minLeft=O(0,i-k.width),k.minTop=O(0,j-k.height),k.maxLeft=P(0,i-k.width),k.maxTop=P(0,j-k.height)):(k.minLeft=-k.width,k.minTop=-k.height,k.maxLeft=i,k.maxTop=j))},renderCanvas:function(a){var b,c,d=this.options,e=this.canvas,f=this.image;this.rotated&&(this.rotated=!1,c=i({width:f.width,height:f.height,degree:f.rotate}),b=c.width/c.height,b!==e.aspectRatio&&(e.left-=(c.width-e.width)/2,e.top-=(c.height-e.height)/2,e.width=c.width,e.height=c.height,e.aspectRatio=b,this.limitCanvas(!0,!1))),(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=O(P(e.width,e.minWidth),e.maxWidth),e.height=O(P(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.oldLeft=e.left=O(P(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=O(P(e.top,e.minTop),e.maxTop),this.$canvas.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.renderImage(),this.cropped&&d.strict&&this.limitCropBox(!0,!0),a&&this.output()},renderImage:function(){var b,c=this.canvas,d=this.image;d.rotate&&(b=i({width:c.width,height:c.height,degree:d.rotate,aspectRatio:d.aspectRatio},!0)),a.extend(d,b?{width:b.width,height:b.height,left:(c.width-b.width)/2,top:(c.height-b.height)/2}:{width:c.width,height:c.height,left:0,top:0}),this.$clone.css({width:d.width,height:d.height,marginLeft:d.left,marginTop:d.top,transform:h(d.rotate)})},initCropBox:function(){var b=this.options,c=this.canvas,d=b.aspectRatio,e=T(b.autoCropArea)||.8,f={width:c.width,height:c.height};d&&(c.height*d>c.width?f.height=f.width/d:f.width=f.height*d),this.cropBox=f,this.limitCropBox(!0,!0),f.width=O(P(f.width,f.minWidth),f.maxWidth),f.height=O(P(f.height,f.minHeight),f.maxHeight),f.width=P(f.minWidth,f.width*e),f.height=P(f.minHeight,f.height*e),f.oldLeft=f.left=c.left+(c.width-f.width)/2,f.oldTop=f.top=c.top+(c.height-f.height)/2,this.initialCropBox=a.extend({},f)},limitCropBox:function(a,b){var c,d,e=this.options,f=e.strict,g=this.container,h=g.width,i=g.height,j=this.canvas,k=this.cropBox,l=e.aspectRatio;a&&(c=T(e.minCropBoxWidth)||0,d=T(e.minCropBoxHeight)||0,k.minWidth=O(h,c),k.minHeight=O(i,d),k.maxWidth=O(h,f?j.width:h),k.maxHeight=O(i,f?j.height:i),l&&(k.maxHeight*l>k.maxWidth?(k.minHeight=k.minWidth/l,k.maxHeight=k.maxWidth/l):(k.minWidth=k.minHeight*l,k.maxWidth=k.maxHeight*l)),k.minWidth=O(k.maxWidth,k.minWidth),k.minHeight=O(k.maxHeight,k.minHeight)),b&&(f?(k.minLeft=P(0,j.left),k.minTop=P(0,j.top),k.maxLeft=O(h,j.left+j.width)-k.width,k.maxTop=O(i,j.top+j.height)-k.height):(k.minLeft=0,k.minTop=0,k.maxLeft=h-k.width,k.maxTop=i-k.height))},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.cropBox;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=O(P(e.width,e.minWidth),e.maxWidth),e.height=O(P(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.oldLeft=e.left=O(P(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=O(P(e.top,e.minTop),e.maxTop),a.movable&&a.cropBoxMovable&&this.$face.data("type",e.width===c&&e.height===d?"move":"all"),this.$cropBox.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.cropped&&a.strict&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){var a=this.options;this.preview(),a.crop&&a.crop.call(this.$element,this.getData()),this.trigger(K)}}),U.initPreview=function(){var b=this.url;this.$preview=a(this.options.preview),this.$viewBox.html('<img src="'+b+'">'),this.$preview.each(function(){var c=a(this);c.data(p,{width:c.width(),height:c.height(),original:c.html()}).html('<img src="'+b+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},U.resetPreview=function(){this.$preview.each(function(){var b=a(this);b.html(b.data(p).original).removeData(p)})},U.preview=function(){var b=this.image,c=this.canvas,d=this.cropBox,e=b.width,f=b.height,g=d.left-c.left-b.left,i=d.top-c.top-b.top,j=b.rotate;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:e,height:f,marginLeft:-g,marginTop:-i,transform:h(j)}),this.$preview.each(function(){var b=a(this),c=b.data(p),k=c.width/d.width,l=c.width,m=d.height*k;m>c.height&&(k=c.height/d.height,l=d.width*k,m=c.height),b.width(l).height(m).find("img").css({width:e*k,height:f*k,marginLeft:-g*k,marginTop:-i*k,transform:h(j)})}))},U.addListeners=function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.on(H,b.cropstart),a.isFunction(b.cropmove)&&c.on(I,b.cropmove),a.isFunction(b.cropend)&&c.on(J,b.cropend),a.isFunction(b.change)&&c.on(K,b.change),a.isFunction(b.zoom)&&c.on(L,b.zoom),d.on(z,a.proxy(this.cropStart,this)),b.zoomable&&b.mouseWheelZoom&&d.on(C,a.proxy(this.wheel,this)),b.doubleClickToggle&&d.on(D,a.proxy(this.dblclick,this)),m.on(A,this._cropMove=e(this.cropMove,this)).on(B,this._cropEnd=e(this.cropEnd,this)),b.responsive&&l.on(E,this._resize=e(this.resize,this))},U.removeListeners=function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.off(H,b.cropstart),a.isFunction(b.cropmove)&&c.off(I,b.cropmove),a.isFunction(b.cropend)&&c.off(J,b.cropend),a.isFunction(b.change)&&c.off(K,b.change),a.isFunction(b.zoom)&&c.off(L,b.zoom),d.off(z,this.cropStart),b.zoomable&&b.mouseWheelZoom&&d.off(C,this.wheel),b.doubleClickToggle&&d.off(D,this.dblclick),m.off(A,this._cropMove).off(B,this._cropEnd),b.responsive&&l.off(E,this._resize)},a.extend(U,{resize:function(){var b,c,d,e=this.$container,f=this.container;!this.disabled&&f&&(d=e.width()/f.width,(1!==d||e.height()!==f.height)&&(b=this.getCanvasData(),c=this.getCropBoxData(),this.render(),this.setCanvasData(a.each(b,function(a,c){b[a]=c*d})),this.setCropBoxData(a.each(c,function(a,b){c[a]=b*d}))))},dblclick:function(){this.disabled||(this.$dragBox.hasClass(w)?this.setDragMode("move"):this.setDragMode("crop"))},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d.isDefaultPrevented()},wheel:function(a){var b=a.originalEvent,c=b,d=1;this.disabled||(a.preventDefault(),c.deltaY?d=c.deltaY>0?1:-1:c.wheelDelta?d=-c.wheelDelta/120:c.detail&&(d=c.detail>0?1:-1),this.zoom(.1*-d,b))},cropStart:function(b){var c,d,e=this.options,f=b.originalEvent,g=f&&f.touches,h=f||b;if(!this.disabled){if(g){if(c=g.length,c>1){if(!e.zoomable||!e.touchDragZoom||2!==c)return;h=g[1],this.startX2=h.pageX,this.startY2=h.pageY,d="zoom"}h=g[0]}if(d=d||a(h.target).data("type"),q.test(d)){if(this.trigger(H,{originalEvent:f,cropType:d}))return;this.cropType=d,this.cropping=!1,this.startX=h.pageX,this.startY=h.pageY,"crop"===d&&(this.cropping=!0,this.$dragBox.addClass(r))}}},cropMove:function(a){var b,c=this.options,d=a.originalEvent,e=d&&d.touches,f=d||a,g=this.cropType;if(!this.disabled){if(e){if(b=e.length,b>1){if(!c.zoomable||!c.touchDragZoom||2!==b)return;f=e[1],this.endX2=f.pageX,this.endY2=f.pageY}f=e[0]}if(g){if(this.trigger(I,{originalEvent:d,cropType:g}))return;this.endX=f.pageX,this.endY=f.pageY,this.change(f.shiftKey,"zoom"===g?d:null)}}},cropEnd:function(a){var b=a.originalEvent,c=this.cropType;this.disabled||c&&(this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(r,this.cropped&&this.options.modal)),this.cropType="",this.trigger(J,{originalEvent:b,cropType:c}))}}),a.extend(U,{crop:function(){this.built&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(r),this.$cropBox.removeClass(t)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.built&&!this.disabled&&(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.cropBox=a.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox())},clear:function(){this.cropped&&!this.disabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(r),this.$cropBox.addClass(t))},destroy:function(){var a=this.$element;this.ready?(this.isImg&&a.attr("src",this.originalUrl),this.unbuild(),a.removeClass(t)):this.$clone&&this.$clone.remove(),a.removeData(o)},replace:function(a){!this.disabled&&a&&(this.isImg&&this.$element.attr("src",a),this.options.data=null,this.load(a))},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(x))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(x))},move:function(a,c){var d=this.canvas;this.built&&!this.disabled&&this.options.movable&&b(a)&&b(c)&&(d.left+=a,d.top+=c,this.renderCanvas(!0))},zoom:function(a,b){var c,d,e=this.canvas;if(a=T(a),a&&this.built&&!this.disabled&&this.options.zoomable){if(this.trigger(L,{originalEvent:b,zoomType:a>0?"zoomin":"zoomout",zoomRatio:a}))return;a=0>a?1/(1-a):1+a,c=e.width*a,d=e.height*a,e.left-=(c-e.width)/2,e.top-=(d-e.height)/2,e.width=c,e.height=d,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(a){var b=this.image;a=T(a),a&&this.built&&!this.disabled&&this.options.rotatable&&(b.rotate=(b.rotate+a)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(b){var c,d,e=this.cropBox,f=this.canvas,g=this.image;return this.built&&this.cropped?(d={x:e.left-f.left,y:e.top-f.top,width:e.width,height:e.height},c=g.width/g.naturalWidth,a.each(d,function(a,e){e/=c,d[a]=b?Math.round(e):e})):d={x:0,y:0,width:0,height:0},d.rotate=this.ready?g.rotate:0,d},setData:function(c){var d,e=this.image,f=this.canvas,g={};this.built&&!this.disabled&&a.isPlainObject(c)&&(b(c.rotate)&&c.rotate!==e.rotate&&this.options.rotatable&&(e.rotate=c.rotate,this.rotated=!0,this.renderCanvas(!0)),d=e.width/e.naturalWidth,b(c.x)&&(g.left=c.x*d+f.left),b(c.y)&&(g.top=c.y*d+f.top),b(c.width)&&(g.width=c.width*d),b(c.height)&&(g.height=c.height*d),this.setCropBoxData(g))},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var a,b=this.canvas;return this.built&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCanvasData:function(c){var d=this.canvas,e=d.aspectRatio;this.built&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&&(d.height=c.height,d.width=c.height*e),this.renderCanvas(!0))},getCropBoxData:function(){var a,b=this.cropBox;return this.built&&this.cropped&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:function(c){var d,e,f=this.cropBox,g=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(f.left=c.left),b(c.top)&&(f.top=c.top),b(c.width)&&c.width!==f.width&&(d=!0,f.width=c.width),b(c.height)&&c.height!==f.height&&(e=!0,f.height=c.height),g&&(d?f.height=f.width/g:e&&(f.width=f.height*g)),this.renderCropBox())},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,k,l,m,n;return this.built&&this.cropped&&M?(a.isPlainObject(b)||(b={}),n=this.getData(),c=n.width,d=n.height,k=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/k,i=g/c):h&&(g=h*k,i=h/d)),e=g||c,f=h||d,l=a("<canvas>")[0],l.width=e,l.height=f,m=l.getContext("2d"),b.fillColor&&(m.fillStyle=b.fillColor,m.fillRect(0,0,e,f)),m.drawImage.apply(m,function(){var a,b,e,f,g,h,k=j(this.$clone[0],this.image),l=k.width,m=k.height,o=[k],p=n.x,q=n.y;return-c>=p||p>l?p=a=e=g=0:0>=p?(e=-p,p=0,a=g=O(l,c+p)):l>=p&&(e=0,a=g=O(c,l-p)),0>=a||-d>=q||q>m?q=b=f=h=0:0>=q?(f=-q,q=0,b=h=O(m,d+q)):m>=q&&(f=0,b=h=O(d,m-q)),o.push(p,q,a,b),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&o.push(e,f,g,h),o}.call(this)),l):void 0},setAspectRatio:function(a){var b=this.options;this.disabled||c(a)||(b.aspectRatio=T(a)||NaN,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(a){var b,c,d=this.options;this.ready&&!this.disabled&&(b=d.dragCrop&&"crop"===a,c=d.movable&&"move"===a,a=b||c?a:"none",this.$dragBox.data("type",a).toggleClass(w,b).toggleClass(v,c),d.cropBoxMovable||this.$face.data("type",a).toggleClass(w,b).toggleClass(v,c))}}),U.change=function(a,b){var c,d=this.cropType,e=this.options,f=this.canvas,g=this.container,h=this.cropBox,i=h.width,j=h.height,k=h.left,l=h.top,m=k+i,n=l+j,o=0,p=0,q=g.width,r=g.height,s=!0,u=e.aspectRatio,v={x:this.endX-this.startX,y:this.endY-this.startY};switch(!u&&a&&(u=i&&j?i/j:1),e.strict&&(o=h.minLeft,p=h.minTop,q=o+O(g.width,f.width),r=p+O(g.height,f.height)),u&&(v.X=v.y*u,v.Y=v.x/u),d){case"all":k+=v.x,l+=v.y;break;case"e":if(v.x>=0&&(m>=q||u&&(p>=l||n>=r))){s=!1;break}i+=v.x,u&&(j=i/u,l-=v.Y/2),0>i&&(d="w",i=0);break;case"n":if(v.y<=0&&(p>=l||u&&(o>=k||m>=q))){s=!1;break}j-=v.y,l+=v.y,u&&(i=j*u,k+=v.X/2),0>j&&(d="s",j=0);break;case"w":if(v.x<=0&&(o>=k||u&&(p>=l||n>=r))){s=!1;break}i-=v.x,k+=v.x,u&&(j=i/u,l+=v.Y/2),0>i&&(d="e",i=0);break;case"s":if(v.y>=0&&(n>=r||u&&(o>=k||m>=q))){s=!1;break}j+=v.y,u&&(i=j*u,k-=v.X/2),0>j&&(d="n",j=0);break;case"ne":if(u){if(v.y<=0&&(p>=l||m>=q)){s=!1;break}j-=v.y,l+=v.y,i=j*u}else v.x>=0?q>m?i+=v.x:v.y<=0&&p>=l&&(s=!1):i+=v.x,v.y<=0?l>p&&(j-=v.y,l+=v.y):(j-=v.y,l+=v.y);0>i&&0>j?(d="sw",j=0,i=0):0>i?(d="nw",i=0):0>j&&(d="se",j=0);break;case"nw":if(u){if(v.y<=0&&(p>=l||o>=k)){s=!1;break}j-=v.y,l+=v.y,i=j*u,k+=v.X}else v.x<=0?k>o?(i-=v.x,k+=v.x):v.y<=0&&p>=l&&(s=!1):(i-=v.x,k+=v.x),v.y<=0?l>p&&(j-=v.y,l+=v.y):(j-=v.y,l+=v.y);0>i&&0>j?(d="se",j=0,i=0):0>i?(d="ne",i=0):0>j&&(d="sw",j=0);break;case"sw":if(u){if(v.x<=0&&(o>=k||n>=r)){s=!1;break}i-=v.x,k+=v.x,j=i/u}else v.x<=0?k>o?(i-=v.x,k+=v.x):v.y>=0&&n>=r&&(s=!1):(i-=v.x,k+=v.x),v.y>=0?r>n&&(j+=v.y):j+=v.y;0>i&&0>j?(d="ne",j=0,i=0):0>i?(d="se",i=0):0>j&&(d="nw",j=0);break;case"se":if(u){if(v.x>=0&&(m>=q||n>=r)){s=!1;break}i+=v.x,j=i/u}else v.x>=0?q>m?i+=v.x:v.y>=0&&n>=r&&(s=!1):i+=v.x,v.y>=0?r>n&&(j+=v.y):j+=v.y;0>i&&0>j?(d="nw",j=0,i=0):0>i?(d="sw",i=0):0>j&&(d="ne",j=0);break;case"move":f.left+=v.x,f.top+=v.y,this.renderCanvas(!0),s=!1;break;case"zoom":this.zoom(function(a,b,c,d){var e=N(a*a+b*b),f=N(c*c+d*d);return(f-e)/e}(Q(this.startX-this.startX2),Q(this.startY-this.startY2),Q(this.endX-this.endX2),Q(this.endY-this.endY2)),b),this.startX2=this.endX2,this.startY2=this.endY2,s=!1;break;case"crop":v.x&&v.y&&(c=this.$cropper.offset(),k=this.startX-c.left,l=this.startY-c.top,i=h.minWidth,j=h.minHeight,v.x>0?v.y>0?d="se":(d="ne",l-=j):v.y>0?(d="sw",k-=i):(d="nw",k-=i,l-=j),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(t)))}s&&(h.width=i,h.height=j,h.left=k,h.top=l,this.cropType=d,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},a.extend(k.prototype,U),k.DEFAULTS={aspectRatio:NaN,autoCropArea:.8,crop:null,data:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,cropBoxMovable:!0,cropBoxResizable:!0,doubleClickToggle:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,change:null,zoom:null},k.setDefaults=function(b){a.extend(k.DEFAULTS,b)},k.TEMPLATE='<div class="cropper-container"><div class="cropper-canvas"></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-type="e"></span><span class="cropper-line line-n" data-type="n"></span><span class="cropper-line line-w" data-type="w"></span><span class="cropper-line line-s" data-type="s"></span><span class="cropper-point point-e" data-type="e"></span><span class="cropper-point point-n" data-type="n"></span><span class="cropper-point point-w" data-type="w"></span><span class="cropper-point point-s" data-type="s"></span><span class="cropper-point point-ne" data-type="ne"></span><span class="cropper-point point-nw" data-type="nw"></span><span class="cropper-point point-sw" data-type="sw"></span><span class="cropper-point point-se" data-type="se"></span></div></div>',k.other=a.fn.cropper,a.fn.cropper=function(b){var e,f=d(arguments,1);return this.each(function(){var c,d=a(this),g=d.data(o);if(!g){if(/destroy/.test(b))return;d.data(o,g=new k(this,b))}"string"==typeof b&&a.isFunction(c=g[b])&&(e=c.apply(g,f))}),c(e)?this:e},a.fn.cropper.Constructor=k,a.fn.cropper.setDefaults=k.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=k.other,this}});